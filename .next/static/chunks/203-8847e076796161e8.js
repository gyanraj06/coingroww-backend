"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{4659:function(e,t,r){r.d(t,{U:function(){return c}});var s=r(7437),l=r(2265),a=r(8184),o=r(7422),n=r(4697),i=r(6881);function c(e){let{value:t,onChange:r}=e,[c,d]=(0,l.useState)(t&&!t.includes("supabase.co")?"url":"upload"),[u,m]=(0,l.useState)(!1),[p,g]=(0,l.useState)(t),f=(0,l.useRef)(null),b=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=e.target.files[0];if(t.size>2097152){alert("File size must be less than 2MB"),f.current&&(f.current.value="");return}let s=t.name.split(".").pop(),l="".concat(Math.random().toString(36).substring(2),".").concat(s),a="posts/".concat(l);try{m(!0);let{error:e}=await i.O.storage.from("images").upload(a,t);if(e)throw e;let{data:s}=i.O.storage.from("images").getPublicUrl(a),l=s.publicUrl;g(l),r(l)}catch(e){console.error("Error uploading image:",e),alert("Error uploading image. Please check your connection and try again.")}finally{m(!1)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-4 border-b border-border pb-2",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>d("upload"),className:"flex items-center gap-2 text-sm font-medium pb-2 -mb-2.5 border-b-2 transition-colors ".concat("upload"===c?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(a.Z,{className:"w-4 h-4"}),"Upload Image"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>d("url"),className:"flex items-center gap-2 text-sm font-medium pb-2 -mb-2.5 border-b-2 transition-colors ".concat("url"===c?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(o.Z,{className:"w-4 h-4"}),"Image URL"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:["upload"===c?(0,s.jsxs)("div",{className:"border-2 border-dashed border-border rounded-lg p-8 hover:bg-accent/50 transition-colors cursor-pointer text-center",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},children:[(0,s.jsx)("input",{type:"file",ref:f,onChange:b,accept:"image/*",className:"hidden",disabled:u}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(0,s.jsx)("div",{className:"p-3 bg-secondary rounded-full",children:(0,s.jsx)(a.Z,{className:"w-6 h-6"})}),u?(0,s.jsx)("p",{className:"font-medium animate-pulse",children:"Uploading..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-medium",children:"Click to upload image"}),(0,s.jsx)("p",{className:"text-xs",children:"SVG, PNG, JPG or GIF (max. 2MB)"})]})]})]}):(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(o.Z,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)("input",{type:"url",placeholder:"https://example.com/image.jpg",value:p||"",onChange:e=>{let t=e.target.value;g(t),r(t)},className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-9"})]})}),p&&(0,s.jsxs)("div",{className:"relative aspect-video w-full max-w-sm rounded-lg overflow-hidden border border-border bg-black/20",children:[(0,s.jsx)("img",{src:p,alt:"Preview",className:"w-full h-full object-cover",onError:e=>{e.target.src="https://placehold.co/600x400?text=Invalid+Image"}}),(0,s.jsx)("button",{type:"button",onClick:()=>{g(""),r(""),f.current&&(f.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-black/60 text-white rounded-full hover:bg-destructive transition-colors backdrop-blur-sm",children:(0,s.jsx)(n.Z,{className:"w-4 h-4"})})]})]})]})}},4086:function(e,t,r){r.d(t,{L:function(){return w}});var s=r(7437),l=r(3705),a=r(2214),o=r(824),n=r(3922),i=r(3894),c=r(8041),d=r(9322),u=r(1216),m=r(2352),p=r(3274),g=r(8604),f=r(9229),b=r(2468),h=r(4697),x=r(2265),v=r(4839),j=r(6881);let N=e=>{let{onClick:t,isActive:r=!1,disabled:l=!1,children:a,title:o}=e;return(0,s.jsx)("button",{type:"button",onClick:t,disabled:l,title:o,className:(0,v.W)("p-2 rounded-md transition-colors hover:bg-muted text-sm",r?"bg-muted text-foreground":"text-muted-foreground",l&&"opacity-50 cursor-not-allowed"),children:a})};function w(e){let{content:t,onChange:r,placeholder:v="Write something..."}=e,[w,y]=(0,x.useState)(!1),[k,C]=(0,x.useState)(!1),[I,Z]=(0,x.useState)(""),A=(0,x.useRef)(null),M=(0,l.jE)({extensions:[a.Z,o.ZP.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary underline underline-offset-4"}}),n.ZP.configure({HTMLAttributes:{class:"rounded-lg max-w-full h-auto my-4"}}),i.Z.configure({controls:!1,nocookie:!0,HTMLAttributes:{class:"w-full aspect-video rounded-lg my-6"}}),c.Z.configure({placeholder:v,emptyEditorClass:"is-editor-empty before:content-[attr(data-placeholder)] before:text-muted-foreground before:float-left before:pointer-events-none before:h-0"})],content:t,editorProps:{attributes:{class:"prose prose-sm sm:prose-base dark:prose-invert max-w-none min-h-[200px] focus:outline-none p-4"},handlePaste:(e,t)=>{var r;let s=null===(r=t.clipboardData)||void 0===r?void 0:r.items;if(!s)return!1;for(let e=0;e<s.length;e++)if(-1!==s[e].type.indexOf("image")){let r=s[e].getAsFile();if(r)return t.preventDefault(),O(r),!0}return!1},handleDrop:(e,t)=>{var r;let s=null===(r=t.dataTransfer)||void 0===r?void 0:r.files;if(!s||0===s.length)return!1;for(let e=0;e<s.length;e++)if(-1!==s[e].type.indexOf("image"))return t.preventDefault(),O(s[e]),!0;return!1}},onUpdate:e=>{let{editor:t}=e;r(t.getHTML())}}),O=async e=>{var t;if(!M)return;if(e.size>5242880){alert("File size must be less than 5MB");return}let r=(null===(t=e.name)||void 0===t?void 0:t.split(".").pop())||"png",s="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2),".").concat(r),l="articles/".concat(s);try{y(!0);let{error:t}=await j.O.storage.from("images").upload(l,e);if(t)throw t;let{data:r}=j.O.storage.from("images").getPublicUrl(l),s=r.publicUrl;M.chain().focus().setImage({src:s}).run()}catch(e){console.error("Error uploading image:",e),alert("Error uploading image. Please try again.")}finally{y(!1)}},S=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=e.target.files[0];await O(t),A.current&&(A.current.value="")},E=()=>{I&&M&&(M.commands.setYoutubeVideo({src:I}),C(!1),Z(""))};return M?(0,s.jsxs)("div",{className:"border border-input rounded-md overflow-hidden bg-card",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-input bg-muted/30 relative",children:[(0,s.jsx)(N,{onClick:()=>M.chain().focus().toggleBold().run(),isActive:M.isActive("bold"),title:"Bold",children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})}),(0,s.jsx)(N,{onClick:()=>M.chain().focus().toggleItalic().run(),isActive:M.isActive("italic"),title:"Italic",children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})}),(0,s.jsx)(N,{onClick:()=>M.chain().focus().toggleStrike().run(),isActive:M.isActive("strike"),title:"Strikethrough",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,s.jsx)(N,{onClick:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.click()},disabled:w,title:"Upload Image",children:w?(0,s.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(g.Z,{className:"w-4 h-4"})}),(0,s.jsx)("input",{type:"file",ref:A,onChange:S,accept:"image/*",className:"hidden",disabled:w}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(N,{onClick:()=>C(!k),isActive:M.isActive("youtube")||k,title:"Add YouTube Video",children:(0,s.jsx)(f.Z,{className:"w-4 h-4"})}),k&&(0,s.jsxs)("div",{className:"absolute top-full left-0 z-50 mt-2 p-2 bg-background border rounded-md shadow-lg flex items-center gap-2 min-w-[300px]",children:[(0,s.jsx)("input",{type:"text",value:I,onChange:e=>Z(e.target.value),placeholder:"Paste YouTube link...",className:"flex-1 h-8 px-2 text-sm border rounded bg-background",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),E())},autoFocus:!0}),(0,s.jsx)("button",{onClick:E,className:"p-1.5 rounded hover:bg-muted text-green-500",title:"Add Video",children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{C(!1),Z("")},className:"p-1.5 rounded hover:bg-muted text-red-500",title:"Cancel",children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})})]})]})]}),(0,s.jsx)(l.kg,{editor:M})]}):null}},6881:function(e,t,r){r.d(t,{O:function(){return s}});let s=(0,r(7327).eI)("https://tnzjanluwfnvatipplpp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRuemphbmx1d2ZudmF0aXBwbHBwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4MDc0NzEsImV4cCI6MjA4NDM4MzQ3MX0.LUONR_PsrD5BmlO9b5j6120l0ffOdm_dEVWB189SRq4")}}]);