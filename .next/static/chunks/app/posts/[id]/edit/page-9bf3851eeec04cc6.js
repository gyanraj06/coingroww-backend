(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{7260:function(e,t,s){Promise.resolve().then(s.bind(s,1881))},1881:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(7437),i=s(2265),n=s(6463),o=s(6881),a=s(3274),l=s(518),c=s(9061),d=s(7138),u=s(4839),m=s(4659),g=s(4086);let x=["News","Markets","Top","Press Release"],p={News:["Bitcoin","Ethereum","Altcoins","DeFi","Blockchain","NFTs","GameFi","Sponsored","P/R"],Markets:["Market Release","Crypto Price","Crypto Stock","Industry"],Top:["Coins","Exchange","Casinos","Wallets","Mining","Bots","DeFi","NFTs"],"Press Release":["Press Release"]};function h(e){var t;let{params:s}=e,h=(0,n.useRouter)(),[f,b]=(0,i.useState)(!1),[j,v]=(0,i.useState)(!0),[N,y]=(0,i.useState)({title:"",slug:"",excerpt:"",content:"",section:"News",category:"Bitcoin",image_url:"",is_featured:!1,is_editor_pick:!1});(0,i.useEffect)(()=>{!async function(){let{data:e,error:t}=await o.O.from("posts").select("*").eq("id",s.id).single();if(t||!e){alert("Post not found"),h.push("/posts");return}y({title:e.title,slug:e.slug,excerpt:e.excerpt||"",content:e.content||"",section:e.section||"News",category:e.category,image_url:e.image_url||"",is_featured:e.is_featured||!1,is_editor_pick:e.is_editor_pick||!1}),v(!1)}()},[s.id,h]);let k=e=>{let{name:t,value:s}=e.target;"section"===t?y(e=>({...e,section:s,category:p[s][0]})):y(e=>({...e,[t]:s}))},w=e=>{let{name:t,checked:s}=e.target;y(e=>({...e,[t]:s}))},C=async e=>{e.preventDefault(),b(!0);try{let{error:e}=await o.O.from("posts").update({title:N.title,slug:N.slug,excerpt:N.excerpt,content:N.content,section:N.section,category:N.category,image_url:N.image_url,is_featured:N.is_featured,is_editor_pick:N.is_editor_pick}).eq("id",s.id);if(e)throw e;h.push("/posts?section=".concat(N.section)),h.refresh()}catch(e){console.error("Error updating post:",e),alert("Error updating post. Please try again.")}finally{b(!1)}};return j?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(a.Z,{className:"w-8 h-8 animate-spin text-primary"})}):(0,r.jsxs)("div",{className:"space-y-8 max-w-5xl mx-auto animate-in fade-in duration-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d.default,{href:"/posts".concat(N.section?"?section=".concat(N.section):""),className:"p-2 hover:bg-accent rounded-lg text-muted-foreground hover:text-foreground transition-colors",children:(0,r.jsx)(l.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Post"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:"Update your article."})]})]}),(0,r.jsx)("form",{onSubmit:C,className:"space-y-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"title",className:"text-sm font-medium leading-none",children:"Title"}),(0,r.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:N.title,onChange:k,className:"flex h-12 w-full rounded-md border border-input bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",placeholder:"Enter article title..."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"slug",className:"text-sm font-medium leading-none",children:"Slug"}),(0,r.jsx)("input",{id:"slug",name:"slug",type:"text",required:!0,value:N.slug,onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",placeholder:"article-slug"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"excerpt",className:"text-sm font-medium leading-none",children:"Excerpt (Summary)"}),(0,r.jsx)("textarea",{id:"excerpt",name:"excerpt",rows:3,required:!0,value:N.excerpt,onChange:k,className:"flex min-h-[80px] w-full rounded-md border border-input bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",placeholder:"Brief summary for the card preview..."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"content",className:"text-sm font-medium leading-none",children:"Content (Markdown/HTML)"}),(0,r.jsx)("div",{className:"min-h-[400px]",children:(0,r.jsx)(g.L,{content:N.content,onChange:e=>y(t=>({...t,content:e})),placeholder:"Write your article content here..."})})]})]}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"p-6 bg-card rounded-xl border border-border shadow-sm space-y-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-foreground border-b border-border pb-2",children:"Publishing Settings"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"section",className:"text-sm font-medium leading-none",children:"Section"}),(0,r.jsx)("select",{id:"section",name:"section",value:N.section,onChange:k,className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:x.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"category",className:"text-sm font-medium leading-none",children:"Tag (Category)"}),(0,r.jsx)("select",{id:"category",name:"category",value:N.category,onChange:k,className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:null===(t=p[N.section])||void 0===t?void 0:t.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium leading-none",children:"Featured Image"}),(0,r.jsx)(m.U,{value:N.image_url,onChange:e=>y(t=>({...t,image_url:e}))})]}),(0,r.jsxs)("div",{className:"space-y-4 pt-4 border-t border-border",children:[(0,r.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-border bg-background hover:bg-accent hover:text-accent-foreground transition-colors cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"is_featured",checked:N.is_featured,onChange:w,className:"mt-1 w-4 h-4 rounded border-primary text-primary focus:ring-primary bg-background"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-sm font-medium text-foreground",children:"Featured Post"}),(0,r.jsx)("span",{className:"block text-xs text-muted-foreground",children:"Show in Hero section"})]})]}),(0,r.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-border bg-background hover:bg-accent hover:text-accent-foreground transition-colors cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"is_editor_pick",checked:N.is_editor_pick,onChange:w,className:"mt-1 w-4 h-4 rounded border-primary text-primary focus:ring-primary bg-background"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-sm font-medium text-foreground",children:"Editor's Pick"}),(0,r.jsx)("span",{className:"block text-xs text-muted-foreground",children:"Show in Sidebar"})]})]})]}),(0,r.jsx)("button",{type:"submit",disabled:f,className:(0,u.W)("w-full flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-medium transition-all shadow-sm",f?"bg-primary/50 cursor-not-allowed opacity-70":"bg-primary text-primary-foreground hover:bg-primary/90"),children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{className:"w-4 h-4 animate-spin"}),(0,r.jsx)("span",{children:"Saving..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Save Changes"})]})})]})})]})})]})}},4659:function(e,t,s){"use strict";s.d(t,{U:function(){return c}});var r=s(7437),i=s(2265),n=s(8184),o=s(7422),a=s(4697),l=s(6881);function c(e){let{value:t,onChange:s}=e,[c,d]=(0,i.useState)(t&&!t.includes("supabase.co")?"url":"upload"),[u,m]=(0,i.useState)(!1),[g,x]=(0,i.useState)(t),p=(0,i.useRef)(null),h=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=e.target.files[0];if(t.size>2097152){alert("File size must be less than 2MB"),p.current&&(p.current.value="");return}let r=t.name.split(".").pop(),i="".concat(Math.random().toString(36).substring(2),".").concat(r),n="posts/".concat(i);try{m(!0);let{error:e}=await l.O.storage.from("images").upload(n,t);if(e)throw e;let{data:r}=l.O.storage.from("images").getPublicUrl(n),i=r.publicUrl;x(i),s(i)}catch(e){console.error("Error uploading image:",e),alert("Error uploading image. Please check your connection and try again.")}finally{m(!1)}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-4 border-b border-border pb-2",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>d("upload"),className:"flex items-center gap-2 text-sm font-medium pb-2 -mb-2.5 border-b-2 transition-colors ".concat("upload"===c?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),"Upload Image"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>d("url"),className:"flex items-center gap-2 text-sm font-medium pb-2 -mb-2.5 border-b-2 transition-colors ".concat("url"===c?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"Image URL"]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:["upload"===c?(0,r.jsxs)("div",{className:"border-2 border-dashed border-border rounded-lg p-8 hover:bg-accent/50 transition-colors cursor-pointer text-center",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)("input",{type:"file",ref:p,onChange:h,accept:"image/*",className:"hidden",disabled:u}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(0,r.jsx)("div",{className:"p-3 bg-secondary rounded-full",children:(0,r.jsx)(n.Z,{className:"w-6 h-6"})}),u?(0,r.jsx)("p",{className:"font-medium animate-pulse",children:"Uploading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"font-medium",children:"Click to upload image"}),(0,r.jsx)("p",{className:"text-xs",children:"SVG, PNG, JPG or GIF (max. 2MB)"})]})]})]}):(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"url",placeholder:"https://example.com/image.jpg",value:g||"",onChange:e=>{let t=e.target.value;x(t),s(t)},className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-9"})]})}),g&&(0,r.jsxs)("div",{className:"relative aspect-video w-full max-w-sm rounded-lg overflow-hidden border border-border bg-black/20",children:[(0,r.jsx)("img",{src:g,alt:"Preview",className:"w-full h-full object-cover",onError:e=>{e.target.src="https://placehold.co/600x400?text=Invalid+Image"}}),(0,r.jsx)("button",{type:"button",onClick:()=>{x(""),s(""),p.current&&(p.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-black/60 text-white rounded-full hover:bg-destructive transition-colors backdrop-blur-sm",children:(0,r.jsx)(a.Z,{className:"w-4 h-4"})})]})]})]})}},4086:function(e,t,s){"use strict";s.d(t,{L:function(){return C}});var r=s(7437),i=s(3705),n=s(2214),o=s(824),a=s(3922),l=s(8041),c=s(9322),d=s(1216),u=s(2352),m=s(7846),g=s(7180),x=s(6292),p=s(5574),h=s(703),f=s(8011),b=s(7422),j=s(8604),v=s(9348),N=s(3751),y=s(2265),k=s(4839);let w=e=>{let{onClick:t,isActive:s=!1,disabled:i=!1,children:n,title:o}=e;return(0,r.jsx)("button",{type:"button",onClick:t,disabled:i,title:o,className:(0,k.W)("p-2 rounded-md transition-colors hover:bg-muted text-sm",s?"bg-muted text-foreground":"text-muted-foreground",i&&"opacity-50 cursor-not-allowed"),children:n})};function C(e){let{content:t,onChange:s,placeholder:k="Write something..."}=e,C=(0,i.jE)({extensions:[n.Z,o.ZP.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary underline underline-offset-4"}}),a.ZP.configure({HTMLAttributes:{class:"rounded-lg max-w-full h-auto"}}),l.Z.configure({placeholder:k,emptyEditorClass:"is-editor-empty before:content-[attr(data-placeholder)] before:text-muted-foreground before:float-left before:pointer-events-none before:h-0"})],content:t,editorProps:{attributes:{class:"prose prose-sm sm:prose-base dark:prose-invert max-w-none min-h-[200px] focus:outline-none p-4"}},onUpdate:e=>{let{editor:t}=e;s(t.getHTML())}}),_=(0,y.useCallback)(()=>{if(!C)return;let e=C.getAttributes("link").href,t=window.prompt("URL",e);if(null!==t){if(""===t){C.chain().focus().extendMarkRange("link").unsetLink().run();return}C.chain().focus().extendMarkRange("link").setLink({href:t}).run()}},[C]),Z=(0,y.useCallback)(()=>{if(!C)return;let e=window.prompt("Image URL");e&&C.chain().focus().setImage({src:e}).run()},[C]);return C?(0,r.jsxs)("div",{className:"border border-input rounded-md overflow-hidden bg-card",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-input bg-muted/30",children:[(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleBold().run(),isActive:C.isActive("bold"),title:"Bold",children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleItalic().run(),isActive:C.isActive("italic"),title:"Italic",children:(0,r.jsx)(d.Z,{className:"w-4 h-4"})}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleStrike().run(),isActive:C.isActive("strike"),title:"Strikethrough",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleHeading({level:1}).run(),isActive:C.isActive("heading",{level:1}),title:"Heading 1",children:(0,r.jsx)(m.Z,{className:"w-4 h-4"})}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleHeading({level:2}).run(),isActive:C.isActive("heading",{level:2}),title:"Heading 2",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleHeading({level:3}).run(),isActive:C.isActive("heading",{level:3}),title:"Heading 3",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleBulletList().run(),isActive:C.isActive("bulletList"),title:"Bullet List",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleOrderedList().run(),isActive:C.isActive("orderedList"),title:"Ordered List",children:(0,r.jsx)(h.Z,{className:"w-4 h-4"})}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().toggleBlockquote().run(),isActive:C.isActive("blockquote"),title:"Quote",children:(0,r.jsx)(f.Z,{className:"w-4 h-4"})}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,r.jsx)(w,{onClick:_,isActive:C.isActive("link"),title:"Link",children:(0,r.jsx)(b.Z,{className:"w-4 h-4"})}),(0,r.jsx)(w,{onClick:Z,title:"Image",children:(0,r.jsx)(j.Z,{className:"w-4 h-4"})}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().undo().run(),disabled:!C.can().undo(),title:"Undo",children:(0,r.jsx)(v.Z,{className:"w-4 h-4"})}),(0,r.jsx)(w,{onClick:()=>C.chain().focus().redo().run(),disabled:!C.can().redo(),title:"Redo",children:(0,r.jsx)(N.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)(i.kg,{editor:C})]}):null}},6881:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});let r=(0,s(7327).eI)("https://tnzjanluwfnvatipplpp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRuemphbmx1d2ZudmF0aXBwbHBwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4MDc0NzEsImV4cCI6MjA4NDM4MzQ3MX0.LUONR_PsrD5BmlO9b5j6120l0ffOdm_dEVWB189SRq4")}},function(e){e.O(0,[572,902,308,231,112,971,23,744],function(){return e(e.s=7260)}),_N_E=e.O()}]);