(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{7260:function(e,s,t){Promise.resolve().then(t.bind(t,1881))},1881:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var r=t(7437),n=t(2265),i=t(6463),a=t(6881),o=t(3274),l=t(518),c=t(9061),d=t(7138),u=t(4839),m=t(4659),g=t(4086);let x=["News","Markets","Top","Press Release"],p={News:["Bitcoin","Ethereum","Altcoins","DeFi","Blockchain","NFTs","GameFi","Sponsored",""],Markets:["Market Release","Crypto Price","Crypto Stock","Industry"],Top:["Coins","Exchange","Casinos","Wallets","Mining","Bots","DeFi","NFTs"],"Press Release":["Press Release"]};function h(e){var s;let{params:t}=e,h=(0,i.useRouter)(),[f,b]=(0,n.useState)(!1),[y,j]=(0,n.useState)(!0),[v,N]=(0,n.useState)({title:"",slug:"",excerpt:"",content:"",section:"News",category:"Bitcoin",image_url:"",is_featured:!1,is_editor_pick:!1,author_name:""});(0,n.useEffect)(()=>{!async function(){let{data:e,error:s}=await a.O.from("posts").select("*").eq("id",t.id).single();if(s||!e){alert("Post not found"),h.push("/posts");return}N({title:e.title,slug:e.slug,excerpt:e.excerpt||"",content:e.content||"",section:e.section||"News",category:e.category,image_url:e.image_url||"",is_featured:e.is_featured||!1,is_editor_pick:e.is_editor_pick||!1,author_name:e.author_name||""}),j(!1)}()},[t.id,h]);let _=e=>{let{name:s,value:t}=e.target;"section"===s?N(e=>({...e,section:t,category:p[t][0]})):N(e=>({...e,[s]:t}))},k=e=>{let{name:s,checked:t}=e.target;N(e=>({...e,[s]:t}))},w=async e=>{e.preventDefault(),b(!0);try{let{error:e}=await a.O.from("posts").update({title:v.title,slug:v.slug,excerpt:v.excerpt,content:v.content,section:v.section,category:v.category,image_url:v.image_url,is_featured:v.is_featured,is_editor_pick:v.is_editor_pick,author_name:v.author_name||null}).eq("id",t.id);if(e)throw e;h.push("/posts?section=".concat(v.section)),h.refresh()}catch(e){console.error("Error updating post:",e),alert("Error updating post. Please try again.")}finally{b(!1)}};return y?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(o.Z,{className:"w-8 h-8 animate-spin text-primary"})}):(0,r.jsxs)("div",{className:"space-y-8 max-w-5xl mx-auto animate-in fade-in duration-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d.default,{href:"/posts".concat(v.section?"?section=".concat(v.section):""),className:"p-2 hover:bg-accent rounded-lg text-muted-foreground hover:text-foreground transition-colors",children:(0,r.jsx)(l.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Post"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:"Update your article."})]})]}),(0,r.jsx)("form",{onSubmit:w,className:"space-y-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"title",className:"text-sm font-medium leading-none",children:"Title"}),(0,r.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:v.title,onChange:_,className:"flex h-12 w-full rounded-md border border-input bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",placeholder:"Enter article title..."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"author_name",className:"text-sm font-medium leading-none",children:"Author Name"}),(0,r.jsx)("input",{id:"author_name",name:"author_name",type:"text",value:v.author_name,onChange:_,className:"flex h-12 w-full rounded-md border border-input bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",placeholder:"Enter author name..."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"slug",className:"text-sm font-medium leading-none",children:"Slug"}),(0,r.jsx)("input",{id:"slug",name:"slug",type:"text",required:!0,value:v.slug,onChange:_,className:"flex h-10 w-full rounded-md border border-input bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",placeholder:"article-slug"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"excerpt",className:"text-sm font-medium leading-none",children:"Excerpt (Summary)"}),(0,r.jsx)("textarea",{id:"excerpt",name:"excerpt",rows:3,required:!0,value:v.excerpt,onChange:_,className:"flex min-h-[80px] w-full rounded-md border border-input bg-card px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",placeholder:"Brief summary for the card preview..."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"content",className:"text-sm font-medium leading-none",children:"Content (Markdown/HTML)"}),(0,r.jsx)("div",{className:"min-h-[400px]",children:(0,r.jsx)(g.L,{content:v.content,onChange:e=>N(s=>({...s,content:e})),placeholder:"Write your article content here..."})})]})]}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"p-6 bg-card rounded-xl border border-border shadow-sm space-y-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-foreground border-b border-border pb-2",children:"Publishing Settings"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"section",className:"text-sm font-medium leading-none",children:"Section"}),(0,r.jsx)("select",{id:"section",name:"section",value:v.section,onChange:_,className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:x.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"category",className:"text-sm font-medium leading-none",children:"Tag (Category)"}),(0,r.jsx)("select",{id:"category",name:"category",value:v.category,onChange:_,className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:null===(s=p[v.section])||void 0===s?void 0:s.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium leading-none",children:"Featured Image"}),(0,r.jsx)(m.U,{value:v.image_url,onChange:e=>N(s=>({...s,image_url:e}))})]}),(0,r.jsxs)("div",{className:"space-y-4 pt-4 border-t border-border",children:[(0,r.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-border bg-background hover:bg-accent hover:text-accent-foreground transition-colors cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"is_featured",checked:v.is_featured,onChange:k,className:"mt-1 w-4 h-4 rounded border-primary text-primary focus:ring-primary bg-background"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-sm font-medium text-foreground",children:"Featured Post"}),(0,r.jsx)("span",{className:"block text-xs text-muted-foreground",children:"Show in Hero section"})]})]}),(0,r.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-border bg-background hover:bg-accent hover:text-accent-foreground transition-colors cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"is_editor_pick",checked:v.is_editor_pick,onChange:k,className:"mt-1 w-4 h-4 rounded border-primary text-primary focus:ring-primary bg-background"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-sm font-medium text-foreground",children:"Editor's Pick"}),(0,r.jsx)("span",{className:"block text-xs text-muted-foreground",children:"Show in Sidebar"})]})]})]}),(0,r.jsx)("button",{type:"submit",disabled:f,className:(0,u.W)("w-full flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-medium transition-all shadow-sm",f?"bg-primary/50 cursor-not-allowed opacity-70":"bg-primary text-primary-foreground hover:bg-primary/90"),children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 animate-spin"}),(0,r.jsx)("span",{children:"Saving..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Save Changes"})]})})]})})]})})]})}}},function(e){e.O(0,[572,902,883,231,503,203,971,23,744],function(){return e(e.s=7260)}),_N_E=e.O()}]);